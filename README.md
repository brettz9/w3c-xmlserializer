# w3c-xmlserializer

An XML serializer that follows the [W3C specification](https://w3c.github.io/DOM-Parsing/). This includes a direct XML serialization function which takes a node tree, as well as an implementation of the (not-very-well-designed) [`XMLSerializer`](https://w3c.github.io/DOM-Parsing/#the-xmlserializer-interface) class from browsers.

This package is mostly used as an internal part of [jsdom](https://github.com/jsdom/jsdom). However, you can use it independently with some care.

## Basic usage

Assume you have a DOM tree rooted at a node `node`. In Node.js, you could create this using [jsdom](https://github.com/jsdom/jsdom) as follows:

```js
const { JSDOM } = require("jsdom");

const { document } = new JSDOM().window;
const node = document.createElement("akomaNtoso");
```

Then, you can either use the `w3c-xmlserializer/serialize` sub-module, or the main module's `XMLSerializer` default export:


```js
const XMLSerializer = require("w3c-xmlserializer");
const serialize = require("w3c-xmlserializer/serialize");

const serializer = new XMLSerializer();
console.log(serializer.serializeToString(node));
// => '<akomantoso xmlns="http://www.w3.org/1999/xhtml"></akomantoso>'

console.log(serialize(node));
// => same result
```

## Advanced usage

### `serialize()` options`

When using `serialize()`, the exception thrown will by default be an instance of the `DOMException` class from the default export of the [domexception](https://github.com/jsdom/domexception) package. You can customize this like so:

```js
serialize(node, { exceptionConstructor: TypeError });
```

Similarly, by default the input DOM tree is not required to be "well-formed". [Per the spec](https://w3c.github.io/DOM-Parsing/#dfn-require-well-formed), this largely is about imposing constraints on the names of elements, attributes, etc. You can instead require well-formedness via

```js
serialize(node, { requireWellFormed: true });
```

### `w3c-xmlserializer/webidl2js-wrapper` module

This module exports the `XMLSerializer` [interface wrapper API](https://github.com/jsdom/webidl2js#for-interfaces) generated by [webidl2js](https://github.com/jsdom/webidl2js).
